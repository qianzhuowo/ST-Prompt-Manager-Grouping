# Prompt Manager Grouping — 提示词分组管理

一个用于 [SillyTavern](https://github.com/SillyTavern/SillyTavern) 的扩展插件，为预设项目列表（Prompt Manager）添加**分组折叠**和**收藏快捷栏**功能，让预设列表更加整洁有序。

## ✨ 功能一览

### 📁 智能分组
- 根据提示词名称中的前缀（`【】` 或 `-`）自动归类到不同分组
- 支持**两级分组**，适合管理大量提示词
- 可选择隐藏前缀，让列表更简洁

### 🔽 折叠/展开
- 点击分组标题即可折叠或展开该组
- 自动记住每个分组的折叠状态，下次打开保持不变

### ⭐ 收藏功能
- 点击提示词右侧的 ⭐ 即可收藏，也可以收藏整个分组
- **内联收藏栏**：在预设面板内显示收藏内容
- **浮动收藏快捷栏**：无需打开预设面板，随时在页面右下角快速开关提示词
- 浮动按钮和面板均可自由拖拽到你喜欢的位置

## 📖 使用方法

### 如何给提示词分组？

只需按照特定格式**命名**你的提示词，插件会自动识别并分组。支持两种命名方式：

#### 方式一：使用中文方括号 `【】`

| 提示词名称 | 一级分组 | 二级分组 | 显示名称 |
|---|---|---|---|
| `【角色】性格设定` | 角色 | — | 性格设定 |
| `【角色】【基础】背景故事` | 角色 | 基础 | 背景故事 |

#### 方式二：使用短横线 `-`

| 提示词名称 | 一级分组 | 二级分组 | 显示名称 |
|---|---|---|---|
| `角色-性格设定` | 角色 | — | 性格设定 |
| `角色-基础-背景故事` | 角色 | 基础 | 背景故事 |

#### 混合使用也可以

| 提示词名称 | 一级分组 | 二级分组 | 显示名称 |
|---|---|---|---|
| `【文生图】常用-测试` | 文生图 | 常用 | 测试 |
| `文生图-【常用】测试` | 文生图 | 常用 | 测试 |

> 💡 没有前缀的提示词不受影响，会照常显示。

### 如何使用收藏？

1. **收藏单个提示词**：在提示词列表中，点击条目右侧的 ⭐ 图标
2. **收藏整个分组**：将鼠标悬停在分组标题上，点击右侧出现的 ⭐ 图标
3. **浮动快捷栏**：点击页面右下角的 ⭐ 圆形按钮，即可打开收藏快捷栏，直接开关提示词

### 如何折叠/展开分组？

- **单个分组**：点击分组标题栏即可切换
- 分组的折叠状态会自动保存

## ⚙️ 设置选项

安装后，在 SillyTavern 右侧设置面板中找到 **「Prompt Manager 分组/收藏」**，可以自由开关以下功能：

| 选项 | 说明 |
|---|---|
| 启用分组 | 是否启用自动分组功能 |
| 启用二级分组 | 是否识别第二层前缀 |
| 隐藏前缀 | 分组后是否只显示去掉前缀的名称 |
| 启用收藏 | 是否在条目右侧显示 ⭐ 按钮 |
| 内联收藏栏 | 是否在预设面板内显示收藏面板 |
| 浮动收藏快捷栏 | 是否显示页面右下角的浮动收藏按钮 |

## 📥 安装方法

### 前置依赖

本插件依赖 **[st-api-wrapper](https://github.com/patchoulib/st-api-wrapper)** 插件，请先安装它。
```
https://github.com/Lianues/st-api-wrapper
```

### 安装步骤

1. 打开 SillyTavern，进入 **扩展** → **安装扩展**
2. 输入本插件的 Git 仓库地址，点击安装
```
https://github.com/qianzhuowo/ST-Prompt-Manager-Grouping
```
3. 刷新页面即可使用

## 💡 小提示

- 分组功能仅影响显示效果，**不会修改预设内容和数据**
- 启用分组后会自动禁用酒馆原生的拖拽排序（关闭分组后自动恢复）
- 可以随时通过修改预设项目名称来调整分组归属
- 浮动快捷栏的按钮和面板都可以拖拽移动，位置会自动保存
